<%= form_for :account, url: "/accounts"  do |f| %>

<fieldset>
<legend>create new account</legend>

<label>account name</label>
<%= f.text_field :name %><br />

<label>account number</label>
<%= f.text_field :number %><br />
<label>parent account</label>
<%= f.text_field :account_id, :list => "list" %><br />
<!-- see http://stackoverflow.com/a/5200352/948073 -->
<!-- see also http://stackoverflow.com/a/30741704/948073 -->

<datalist id="list">
<% @accounts.each do |account|  %>
<% account_fullname = account.name %>
<% account_level = account %>
<% loop do %>
<% break if not account_level.account_id %>
<% account_level = @accounts.find(account_level.account_id) %>
<% account_fullname = "#{account_level.name}|#{account_fullname}" %>
<% end %>
<%= content_tag "option", account_fullname, value: account.id  %>
<% end %>
</datalist>
<%= f.submit %>

</fieldset>
<% end %>

<%= link_to 'Back', accounts_path %>
